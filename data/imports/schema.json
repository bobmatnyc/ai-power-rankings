{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "AI Power Rankings Import Schema",
  "description": "Schema for importing tool data and metrics history into the AI Power Rankings database",
  "definitions": {
    "tool": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "maxLength": 50,
          "description": "Unique tool identifier (lowercase, hyphen-separated)"
        },
        "name": {
          "type": "string",
          "maxLength": 100,
          "description": "Display name of the tool"
        },
        "slug": {
          "type": "string",
          "maxLength": 100,
          "description": "URL-safe slug for the tool"
        },
        "company_id": {
          "type": ["string", "null"],
          "format": "uuid",
          "description": "UUID of the parent company"
        },
        "category": {
          "type": "string",
          "maxLength": 50,
          "enum": [
            "autonomous-agent",
            "code-editor",
            "ide-assistant",
            "app-builder",
            "open-source-framework",
            "testing-tool",
            "code-review",
            "code-generation"
          ],
          "description": "Primary category of the tool"
        },
        "subcategory": {
          "type": ["string", "null"],
          "maxLength": 50,
          "description": "Optional subcategory"
        },
        "description": {
          "type": ["string", "null"],
          "description": "Detailed description of the tool"
        },
        "tagline": {
          "type": ["string", "null"],
          "maxLength": 255,
          "description": "Short marketing tagline"
        },
        "website_url": {
          "type": ["string", "null"],
          "maxLength": 255,
          "format": "uri",
          "description": "Official website URL"
        },
        "github_repo": {
          "type": ["string", "null"],
          "maxLength": 255,
          "description": "GitHub repository URL"
        },
        "founded_date": {
          "type": ["string", "null"],
          "format": "date",
          "description": "Date when the tool was founded (YYYY-MM-DD)"
        },
        "pricing_model": {
          "type": ["string", "null"],
          "enum": ["free", "freemium", "paid", "open-source", "enterprise"],
          "description": "Primary pricing model"
        },
        "license_type": {
          "type": ["string", "null"],
          "enum": ["mit", "apache", "gpl", "proprietary", "other"],
          "description": "Software license type"
        },
        "status": {
          "type": "string",
          "enum": ["active", "beta", "deprecated", "discontinued"],
          "default": "active",
          "description": "Current status of the tool"
        },
        "logo_url": {
          "type": ["string", "null"],
          "maxLength": 500,
          "format": "uri",
          "description": "URL to the tool's logo"
        }
      },
      "required": ["id", "name", "slug", "category"],
      "additionalProperties": false
    },
    "company": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid",
          "description": "UUID for the company"
        },
        "name": {
          "type": "string",
          "maxLength": 100,
          "description": "Company name"
        },
        "slug": {
          "type": "string",
          "maxLength": 100,
          "description": "URL-safe slug for the company"
        },
        "website_url": {
          "type": ["string", "null"],
          "maxLength": 255,
          "format": "uri",
          "description": "Company website"
        },
        "headquarters": {
          "type": ["string", "null"],
          "maxLength": 100,
          "description": "Company headquarters location"
        },
        "founded_year": {
          "type": ["integer", "null"],
          "minimum": 1900,
          "maximum": 2100,
          "description": "Year the company was founded"
        },
        "company_size": {
          "type": ["string", "null"],
          "enum": ["startup", "small", "medium", "large", "enterprise"],
          "description": "Size category of the company"
        },
        "company_type": {
          "type": ["string", "null"],
          "enum": ["private", "public", "open-source", "non-profit"],
          "description": "Type of company"
        },
        "logo_url": {
          "type": ["string", "null"],
          "maxLength": 500,
          "format": "uri",
          "description": "URL to company logo"
        },
        "description": {
          "type": ["string", "null"],
          "description": "Company description"
        }
      },
      "required": ["name", "slug"],
      "additionalProperties": false
    },
    "metricsHistory": {
      "type": "object",
      "properties": {
        "tool_id": {
          "type": "string",
          "maxLength": 50,
          "description": "Tool identifier this metric belongs to"
        },
        "metric_key": {
          "type": "string",
          "maxLength": 50,
          "enum": [
            "users",
            "monthly_arr",
            "github_stars",
            "github_commits_last_month",
            "swe_bench_score",
            "context_window_tokens",
            "supported_languages_count",
            "multi_file_support",
            "llm_providers_count",
            "valuation_usd",
            "total_funding_usd",
            "employees_count"
          ],
          "description": "Metric identifier"
        },
        "value_integer": {
          "type": ["integer", "null"],
          "description": "Integer value for countable metrics"
        },
        "value_decimal": {
          "type": ["number", "null"],
          "description": "Decimal value for precise metrics"
        },
        "value_boolean": {
          "type": ["boolean", "null"],
          "description": "Boolean value for yes/no metrics"
        },
        "value_json": {
          "type": ["object", "array", "null"],
          "description": "JSON value for complex structured data"
        },
        "recorded_at": {
          "type": "string",
          "format": "date-time",
          "description": "When this metric was recorded (ISO 8601)"
        },
        "source": {
          "type": ["string", "null"],
          "maxLength": 50,
          "description": "Source of the metric data"
        },
        "source_url": {
          "type": ["string", "null"],
          "maxLength": 500,
          "format": "uri",
          "description": "URL where the metric was sourced"
        },
        "notes": {
          "type": ["string", "null"],
          "description": "Additional notes about this metric"
        },
        "is_interpolated": {
          "type": "boolean",
          "default": false,
          "description": "Whether this value was calculated/interpolated"
        }
      },
      "required": ["tool_id", "metric_key", "recorded_at"],
      "additionalProperties": false
    },
    "toolCapability": {
      "type": "object",
      "properties": {
        "tool_id": {
          "type": "string",
          "maxLength": 50,
          "description": "Tool identifier this capability belongs to"
        },
        "capability_type": {
          "type": "string",
          "maxLength": 50,
          "enum": [
            "autocomplete",
            "chat_interface",
            "code_generation",
            "refactoring",
            "testing",
            "documentation",
            "multi_file_editing",
            "context_awareness",
            "language_support",
            "custom_prompts"
          ],
          "description": "Type of capability"
        },
        "value_text": {
          "type": ["string", "null"],
          "description": "Text value for descriptive capabilities"
        },
        "value_number": {
          "type": ["number", "null"],
          "description": "Numeric value for measurable capabilities"
        },
        "value_boolean": {
          "type": ["boolean", "null"],
          "description": "Boolean value for yes/no capabilities"
        },
        "value_json": {
          "type": ["object", "array", "null"],
          "description": "JSON value for complex capability data"
        }
      },
      "required": ["tool_id", "capability_type"],
      "additionalProperties": false
    },
    "pricingPlan": {
      "type": "object",
      "properties": {
        "tool_id": {
          "type": "string",
          "maxLength": 50,
          "description": "Tool identifier this pricing plan belongs to"
        },
        "plan_name": {
          "type": "string",
          "maxLength": 50,
          "description": "Name of the pricing plan"
        },
        "price_monthly": {
          "type": ["number", "null"],
          "minimum": 0,
          "description": "Monthly price in USD"
        },
        "price_annually": {
          "type": ["number", "null"],
          "minimum": 0,
          "description": "Annual price in USD"
        },
        "currency": {
          "type": "string",
          "maxLength": 3,
          "default": "USD",
          "description": "Currency code (ISO 4217)"
        },
        "billing_cycle": {
          "type": ["string", "null"],
          "enum": ["monthly", "annually", "one-time", "usage-based"],
          "description": "Billing frequency"
        },
        "features": {
          "type": ["object", "null"],
          "description": "JSON object describing plan features"
        },
        "limits": {
          "type": ["object", "null"],
          "description": "JSON object describing plan limits"
        },
        "is_primary": {
          "type": "boolean",
          "default": false,
          "description": "Whether this is the primary/featured plan"
        },
        "is_active": {
          "type": "boolean",
          "default": true,
          "description": "Whether this plan is currently available"
        }
      },
      "required": ["tool_id", "plan_name"],
      "additionalProperties": false
    }
  },
  "type": "object",
  "properties": {
    "importType": {
      "type": "string",
      "enum": ["tools", "metrics_history", "companies", "tool_capabilities", "pricing_plans"],
      "description": "Type of data being imported"
    },
    "data": {
      "type": "array",
      "description": "Array of objects to import",
      "items": {
        "oneOf": [
          { "$ref": "#/definitions/tool" },
          { "$ref": "#/definitions/company" },
          { "$ref": "#/definitions/metricsHistory" },
          { "$ref": "#/definitions/toolCapability" },
          { "$ref": "#/definitions/pricingPlan" }
        ]
      }
    },
    "options": {
      "type": "object",
      "properties": {
        "upsert": {
          "type": "boolean",
          "default": true,
          "description": "Whether to update existing records or create only new ones"
        },
        "validateOnly": {
          "type": "boolean",
          "default": false,
          "description": "Only validate the data without importing"
        },
        "batchSize": {
          "type": "integer",
          "default": 100,
          "minimum": 1,
          "maximum": 1000,
          "description": "Number of records to process at once"
        }
      }
    }
  },
  "required": ["importType", "data"],
  "additionalProperties": false
}
