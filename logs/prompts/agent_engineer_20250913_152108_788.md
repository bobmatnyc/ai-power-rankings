---
timestamp: 2025-09-13T15:21:08.788199
type: agent_engineer
metadata: {"agent_type": "engineer", "agent_id": "engineer_ff589197-bcb8-4cef-a00d-db9837991a19", "session_id": "ff589197-bcb8-4cef-a00d-db9837991a19", "delegation_context": {"description": "Import companies and verify DB usage", "timestamp": "2025-09-13T15:21:08.786200"}}
---


AGENT MEMORY - PROJECT-SPECIFIC KNOWLEDGE:
# Agent Memory: engineer
<!-- Last Updated: 2025-08-07 16:00:35 | Auto-updated by: engineer -->

<!-- MEMORY LIMITS: 8KB max | 10 sections max | 15 items per section -->

## Project Context
ai-power-rankings: node_js (with typescript, react) single page application
- Main modules: types, contexts, app, app/rss.xml
- Uses: @marsidev/react-turnstile, @radix-ui/react-checkbox, @radix-ui/react-collapsible
- Testing: @testing-library/jest-dom
- Key patterns: Async Programming

## Project Architecture
- Single Page Application with node_js implementation
- Main directories: src, docs
- Core modules: types, contexts, app, app/rss.xml

## Coding Patterns Learned
- Node.js project: use async/await, ES6+ features
- React patterns: component composition, hooks usage
- React patterns: component composition, hooks usage
- React patterns: component composition, hooks usage
- Project uses: Async Programming

## Implementation Guidelines
- Use pnpm for dependency management
- Write tests using @testing-library/jest-dom
- Use build tools: test, test:watch
- Key config files: package.json

## Domain-Specific Knowledge
<!-- Agent-specific knowledge for ai-power-rankings domain -->
- Key project terms: tools, about, rankings, admin
- Focus on implementation patterns, coding standards, and best practices
- Ensure test coverage using @testing-library/jest-dom

## Effective Strategies
<!-- Successful approaches discovered through experience -->

## Common Mistakes to Avoid
- Avoid callback hell - use async/await consistently
- Don't commit node_modules - ensure .gitignore is correct
- Don't skip test isolation - ensure tests can run independently

## Integration Points
- REST API integration pattern

## Performance Considerations
- Leverage event loop - avoid blocking operations
- Use streams for large data processing
- Use React.memo for expensive component renders

## Current Technical Context
- Tech stack: node_js, @marsidev/react-turnstile, @radix-ui/react-checkbox
- API patterns: REST API
- Key dependencies: @builder.io/partytown, @hookform/resolvers, @marsidev/react-turnstile, @next/third-parties
- Documentation: README.md, CHANGELOG.md, docs/SITEMAP-SUBMISSION.md

## Recent Learnings
<!-- Most recent discoveries and insights -->
- **August 2025 API Consolidation**: Reduced 8 separate endpoints to 1 unified handler
- **Code Reduction**: Achieved 30% reduction through aggressive refactoring
- **JSON Storage**: Standardized on file-based storage with validation
- **Cache Strategy**: Generate static JSON files for performance
- **TrackDown Integration**: All work must link to local tickets in /trackdown/


INSTRUCTIONS: Review your memory above before proceeding. Apply learned patterns and avoid known mistakes.


We need to populate the companies table in the database and ensure the application properly uses all database data. Here's what needs to be done:

1. **Import Companies to Database**:
   - Create a script to import companies from `/data/json/companies/companies.json` to the database
   - The JSON file has 63 companies in a nested structure: `.companies` object with numeric keys
   - Each company has fields like: name, slug, website, description, etc.
   - Import to PRODUCTION database first: `postgresql://neondb_owner:npg_3oQsxj0FcfKY@ep-wispy-fog-ad8d4skz.c-2.us-east-1.aws.neon.tech/neondb?sslmode=require`
   - Then we'll migrate to dev database

2. **Database Table Structure**:
   - Table: `companies` with columns: id (uuid), slug, name, data (jsonb), created_at, updated_at
   - Store the full company data in the `data` jsonb column
   - Generate appropriate slugs from company names

3. **Verify Database Usage**:
   - Check that the application code uses database repositories instead of JSON files
   - Look for any hardcoded JSON file paths that should use database
   - Ensure all data access goes through the database layer
   - Check files in `/src/lib/repositories/` and `/src/lib/services/`

4. **Test the Integration**:
   - After import, verify companies are accessible via the app
   - Test that tools, news, rankings, and companies all load from database
   - Make sure the admin panel can access all data

Please create the import script, execute it on production, then verify the code properly references all database data. Test thoroughly and provide evidence that everything works.

IMPORTANT: After importing to production, run the migration script at `/scripts/migrate-prod-to-dev.sh` to sync with development.