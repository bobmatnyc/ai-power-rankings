# Sitemap Submission Guide

## Overview

This guide explains how to submit the sitemap to Google Search Console for the AI Power Rankings site.

## Prerequisites

1. **Google Cloud Authentication**: You must be authenticated with the correct Google Cloud project:

   ```bash
   gcloud auth application-default login
   ```

2. **Search Console Access**: The site must be verified in Google Search Console

3. **Site Accessibility**: The production site must be accessible at https://aipowerranking.com

## Sitemap Scripts

### 1. Check and Submit Sitemap

Use this script to check if the sitemap is accessible and submit it immediately:

```bash
npm run sitemap:check
```

This script will:

- Check if the sitemap is accessible at https://aipowerranking.com/sitemap.xml
- Download and validate the sitemap XML
- Submit it to Google Search Console
- Display the submission status

### 2. Monitor and Auto-Submit

If the site is temporarily inaccessible, use the monitoring script:

```bash
npm run sitemap:monitor
```

This script will:

- Check site availability every 60 seconds
- Automatically submit the sitemap once the site becomes accessible
- Save submission status to `sitemap-submitted.json`
- Run for up to 1 hour (60 attempts)

### 3. Check Submission Status

To check if the sitemap has been submitted:

```bash
npm run sitemap:status
```

## Manual Submission via Search Console

If automated submission fails, you can submit manually:

1. Go to [Google Search Console](https://search.google.com/search-console)
2. Select your property (aipowerranking.com)
3. Navigate to "Sitemaps" in the left sidebar
4. Enter the sitemap URL: `https://aipowerranking.com/sitemap.xml`
5. Click "Submit"

## Troubleshooting

### Site Not Accessible

If you're getting connection timeouts:

1. Check Vercel deployment status:

   ```bash
   vercel ls --yes
   ```

2. Verify DNS configuration:

   ```bash
   nslookup aipowerranking.com
   ```

3. Test with direct Vercel URL first

### Authentication Errors

If you get authentication errors:

1. Re-authenticate with proper scopes:

   ```bash
   gcloud auth application-default login \
     --scopes=https://www.googleapis.com/auth/webmasters
   ```

2. Verify you have access to the Search Console property

### Sitemap Processing Errors

If Google can't process the sitemap:

1. Verify sitemap is valid XML
2. Check all URLs in the sitemap are accessible
3. Ensure sitemap follows Google's requirements
4. Check for any robots.txt blocking

## Sitemap Details

The sitemap is dynamically generated by Next.js at `/src/app/sitemap.ts` and includes:

- All static pages (home, rankings, tools, news, methodology, about)
- Language-specific versions for 8 languages
- Individual tool pages
- Historical ranking snapshots

The sitemap is automatically updated when:

- New tools are added
- Tool information is updated
- New ranking periods are created

## Environment Variables

No environment variables are required for sitemap submission as it uses:

- Application Default Credentials for Google Cloud
- The production URL is hardcoded in the scripts

## Best Practices

1. **Submit After Deployment**: Always submit the sitemap after major deployments
2. **Monitor Search Console**: Check for crawling errors regularly
3. **Keep Sitemap Updated**: The dynamic sitemap ensures it's always current
4. **Check Coverage**: Monitor index coverage in Search Console

## Related Documentation

- [Google Search Console Help](https://support.google.com/webmasters/answer/183668)
- [Sitemap Protocol](https://www.sitemaps.org/protocol.html)
- [Next.js Sitemap Documentation](https://nextjs.org/docs/app/api-reference/file-conventions/metadata/sitemap)
